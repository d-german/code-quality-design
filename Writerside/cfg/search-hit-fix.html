<!-- Injected into <head> by <include-in-head> -->
<script>
    /*
     * Remove trailing “: undefined” from every
     * <h4 class="quick-search__title">…</h4> that appears
     * in Writerside’s quick-search dropdown.
     */
    (function () {
        const bad = /\s*:\s*undefined\s*$/;            // pattern to drop

        function clean(node) {
            if (!node || !node.textContent) return;
            const txt = node.textContent;
            if (bad.test(txt)) node.textContent = txt.replace(bad, '');
        }

        // 1. Clean titles already in the DOM
        document.querySelectorAll('.quick-search__title').forEach(clean);

        // 2. Watch for new results added after each keystroke
        const obs = new MutationObserver(mutations =>
            mutations.forEach(m =>
                m.addedNodes.forEach(n =>
                    n.querySelectorAll?.('.quick-search__title').forEach(clean)
                )
            )
        );
        obs.observe(document.body, { childList: true, subtree: true });
    })();
</script>
