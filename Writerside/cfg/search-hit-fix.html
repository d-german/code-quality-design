<!-- cfg/search-hit-fix.html -->
<style>
    /* ───────── 1. remove “powered-by” footer ───────── */
    .app__footer{display:none!important}

    /* ───────── 2. hide results-header & advanced button ───────── */
    .quick-search__results-header,
    [data-test="full-search-button"],
    .quick-search__advanced-link,
    .DocSearch-SeeAllResults,
    button[aria-label="See all results"]{
        display:none!important
    }
</style>

<script>
    (function () {
        /* ───────── config ───────── */
        const SEARCH_PLACEHOLDER = 'Search docs…';     // ← change text here
        const INPUT_SEL = '.quick-search input[type="search"],.DocSearch-Search-Input';
        const BAD = /\s*:\s*undefined\s*$/;

        /* ───────── helper: clean a title ───────── */
        const clean = el =>
            el && BAD.test(el.textContent) &&
            (el.textContent = el.textContent.replace(BAD,''));

        /* ───────── helper: enforce placeholder & watch it ───────── */
        function patchInput(inp){
            if(!inp) return;
            inp.placeholder = SEARCH_PLACEHOLDER;

            /* keep it patched even if Writerside rewrites later */
            new MutationObserver(ms=>{
                ms.forEach(m=>{
                    if(m.attributeName==='placeholder' && inp.placeholder!==SEARCH_PLACEHOLDER)
                        inp.placeholder = SEARCH_PLACEHOLDER;
                });
            }).observe(inp,{attributes:true,attributeFilter:['placeholder']});
        }

        /* ───────── run once and observe DOM ───────── */
        function init(){
            /* existing elements */
            document.querySelectorAll('.quick-search__title').forEach(clean);
            document.querySelectorAll(INPUT_SEL).forEach(patchInput);

            /* future elements */
            new MutationObserver(ms=>
                ms.forEach(m=>m.addedNodes.forEach(n=>{
                    n.querySelectorAll?.('.quick-search__title').forEach(clean);
                    n.querySelectorAll?.(INPUT_SEL).forEach(patchInput);
                    /* if the added node itself is an input/title */
                    if(n.matches?.('.quick-search__title')) clean(n);
                    if(n.matches?.(INPUT_SEL)) patchInput(n);
                }))
            ).observe(document.body,{childList:true,subtree:true});
        }

        document.readyState==='loading'
            ? document.addEventListener('DOMContentLoaded',init)
            : init();
    })();
</script>
